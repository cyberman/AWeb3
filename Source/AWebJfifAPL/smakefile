## SAS/C makefile for awebjfif aweb plugin module

# Compiler and flags
CC=sc
CFLAGS= NOSTKCHK PARMS=REG OPTIMIZE OPTGO OPTPEEP OPTINLOCAL OPTINL\
        OPTLOOP OPTRDEP=4 OPTDEP=4 OPTCOMP=4 define CPU="68020" cpu=68020

# Linker and flags
LN=slink
LDFLAGS= SD ND BATCH

# Library tools
AR=oml
RM=delete quiet

# Main plugin object files
PLUGIN_OBJS = startup.o awebjfif.o jfifsource.o jfifcopy.o

# Default target
all: awebjfif.awebplugin

# Build the main plugin
awebjfif.awebplugin: $(PLUGIN_OBJS) awebjfif.lnk jpeglib/libjpeg.lib
   $(LN) with awebjfif.lnk

# Individual object file rules
startup.o: startup.c pluginlib.h
   $(CC) startup.c

awebjfif.o: awebjfif.c pluginlib.h awebjfif.h
   $(CC) awebjfif.c

jfifsource.o: jfifsource.c pluginlib.h awebjfif.h
   $(CC) jfifsource.c

jfifcopy.o: jfifcopy.c pluginlib.h awebjfif.h
   $(CC) jfifcopy.c

# Clean targets
clean:
   $(RM) *.o

cleanall: clean
   $(RM) awebjfif.awebplugin

install: awebjfif.awebplugin
   -copy clone awebjfif.awebplugin TO //Internet/AWeb/awebplugin/awebjfif.awebplugin
   -copy clone awebjfif.awebrx TO //Internet/AWeb/Docs/awebjfif.awebrx
   -copy clone awebjfif.html TO //Internet/AWeb/Docs/awebjfif.html
